<h1 style="text-transform: capitalize;">{{this.typeStr}}</h1>
<ng-container *ngIf="this.loaded; else loading">
    <form [formGroup]="this.methodElementFormGroup">
        <mat-form-field id="meID" style="width: 100%;" type="text">
            <mat-label>ID</mat-label>
            <input matInput formControlName="id">
        </mat-form-field>
        <mat-form-field style="width: 100%;">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name">
        </mat-form-field>
        <mat-form-field style="width: 100%;">
            <mat-label>Description</mat-label>
            <input matInput formControlName="description">
        </mat-form-field>
        <mat-checkbox formControlName="abstract" matInput> Abstract </mat-checkbox>
        <div></div>
        <mat-label>Figure</mat-label>
        <input formControlName="figure" type="file">
    </form>
    <ng-container *ngIf="this.relations">
        <div>
            Relates to:
            Structural relations:
            <div style="display: table; border: 1px solid black;" 
            cdkDropList 
            id="structList"
            [cdkDropListData]="this.methodElement.me_struct_rel_to" 
            [cdkDropListConnectedTo]="['toolList', 'artefactList', 'activityList', 'roleList']"
            (cdkDropListEntered)="dropped($event)">
                <ng-container *ngFor="let srelto of this.methodElement.me_struct_rel_to">
                    <div style="display: table-cell;">
                        <a [routerLink]="['/', this.typeStr, srelto.fromME]"> {{srelto.fromME}} </a>
                        {{srelto.name}}
                    </div>
                </ng-container>
            </div>
            <ng-container *ngIf="this.type == 3">
                Activity relations:
                <div>
                        <ng-container *ngFor="let actrelto of this.methodElement.activity_rel_to">
                            <div>
                                <a [routerLink]="['/activity', actrelto.fromME]"></a>
                                {{actrelto.name}}
                            </div>
                        </ng-container>
                </div>
            </ng-container>
            <ng-container *ngIf="this.type == 2">
                Artefact relations:
                <div>
                        <ng-container *ngFor="let artrelto of this.methodElement.artefact_rel_to">
                            <div>
                                <a [routerLink]="['/artefact' + this.typeStr, artrelto.fromME]"></a>
                                {{artrelto.name}}
                            </div>
                        </ng-container>
                </div>
            </ng-container>
        </div>
        <div>
            Is related by:
            Structural relations:
            <ng-container *ngFor="let srelfrom of this.methodElement.me_struct_rel_from">
                <div>
                    <a [routerLink]="['/' + this.typeStr, srelfrom.id]"></a>
                    {{srelfrom.name}}
                </div>
            </ng-container>
            <ng-container *ngIf="this.type == 3">
            Activity relations:
                <ng-container *ngFor="let actrelfrom of this.methodElement.activity_rel_from">
                    <div>
                        <a [routerLink]="['/activity', actrelfrom.id]"></a>
                        {{actrelfrom.name}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container *ngIf="this.type == 2">
                Artefact relations:
                <ng-container *ngFor="let artrelfrom of this.methodElement.artefact_rel_from">
                    <div>
                        <a [routerLink]="['/artefact', artrelfrom.id]"></a>
                        {{artrelfrom.name}}
                    </div>
                </ng-container>
            </ng-container>
        </div>
    </ng-container>
</ng-container>
<ng-template #loading>
    <mat-spinner></mat-spinner>
</ng-template>